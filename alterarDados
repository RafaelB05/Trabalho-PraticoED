#include <iostream>
#include <fstream>
#include <string>
#include <cstring>
using namespace std;

struct Call_911
{
	unsigned int id;
	float lat;
	float lgn;
	char desc[120];
	float zip;
	char title[75];
	char timeStamp[75];
	char twp[40];
	char addr[75];
	int e;
	bool flag;
};

void alterarPos(char *file_name, int pos0)
{

    int i = 0;
    string palavra;
    Call_911 New;

	cin >> pos0;

	cin >> New.lat;
	cin >> New.lgn;
	cin.ignore();
	getline(cin,palavra);
	while(i <= sizeof(New.desc))
	{
		New.desc[i] = palavra[i];
		i++; 
	}
	cin >> New.zip;
	cin.ignore();
	getline(cin,palavra);
	i = 0;
	while(i <= sizeof(New.title))
	{
		New.title[i] = palavra[i];
		i++; 
	}
	cin.ignore();
	getline(cin,palavra);
	i = 0;
	while(i <= sizeof(New.timeStamp))
	{
		New.timeStamp[i] = palavra[i];
		i++; 
	}
	cin.ignore();
	getline(cin,palavra);
	i = 0;
	while(i <= sizeof(New.twp))
	{
		New.twp[i] = palavra[i];
		i++; 
	}
	cin.ignore();
	getline(cin,palavra);
	i = 0;
	while(i <= sizeof(New.addr))
	{
		New.addr[i] = palavra[i];
		i++; 
	}
	cin >> New.e;
	New.flag = true;

	cout << endl;

    fstream paste;
	paste.open("paste.bin",fstream::in | fstream::out | fstream::binary);

    if ( paste )
    {
        paste.seekg(0, paste.end);
        int tam = paste.tellg();
        paste.seekg(0, paste.beg);

        int numero_registros = tam / sizeof(Call_911);

        Call_911 *registros = new Call_911[1];

		paste.seekg(pos0, paste.beg);

        paste.seekg(pos0 * sizeof(Call_911), paste.beg);
        paste.read((char*)(&registros[0]), sizeof(Call_911));

            cout << registros[0].id << endl;
            cout << registros[0].lat << endl;
            cout << registros[0].lgn << endl;
            cout << registros[0].desc << endl;
            cout << registros[0].zip << endl;
            cout << registros[0].title << endl;
            cout << registros[0].timeStamp << endl;
            cout << registros[0].twp << endl;
            cout << registros[0].addr << endl;
            cout << registros[0].e << endl;
            cout << "- - - - - - - - - - - - " << endl;

        New.id = pos0;
        paste.seekp(pos0 * sizeof(Call_911), paste.beg);
        paste.write((const char *) (&New), sizeof(Call_911));

        paste.seekg(pos0 * sizeof(Call_911), paste.beg);
        paste.read((char*)(&registros[0]), sizeof(Call_911));

            cout << registros[0].id << endl;
            cout << registros[0].lat << endl;
            cout << registros[0].lgn << endl;
            cout << registros[0].desc << endl;
            cout << registros[0].zip << endl;
            cout << registros[0].title << endl;
            cout << registros[0].timeStamp << endl;
            cout << registros[0].twp << endl;
            cout << registros[0].addr << endl;
            cout << registros[0].e << endl;
            cout << "- - - - - - - - - - - - " << endl;

    }
    else
    {
        cout << "Erro na leitura do arquivo!";
    }
    cout << "sucesso" << endl;
    paste.close();
    return;
}

int main()
{
	char *file_name = "paste.bin";
    int pos0;
    alterarPos(file_name, pos0);
    return 0;
}
